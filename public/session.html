<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/png" href="../assets/img/favicon.png">
    <title>
        Voting Game
    </title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
    <link href="./assets/nucleo-icons.css" rel="stylesheet" />
    <link href="./assets/nucleo-svg.css" rel="stylesheet" />
    
    <link id="pagestyle" href="./assets/argon-dashboard.min.css?v=2.0.4" rel="stylesheet" />
</head>

<body class="g-sidenav-show bg-gray-100">
    <div class="position-absolute w-100 min-height-300 top-0"
        style="background-image: url('https://chibujax.com/mediacity.jpg'); background-position-y: 50%;">
        <span class="mask bg-primary opacity-6"></span>
    </div>

    <div id="notification" style="position: fixed; bottom: 0;left: 0;right: 0;" class="alert hide" role="alert">

    </div>


    <main id="join" class="main-content  mt-0">
        <div class="page-header align-items-start min-vh-50 pt-5 pb-11 m-3 border-radius-lg"
            style=" background-position: top;">

            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-5 text-center mx-auto">
                        <h1 class="text-white mb-2 mt-5">Welcome!</h1>
                        <p class="text-lead text-white">Enter a display name to continue.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row mt-lg-n10 mt-md-n11 mt-n10 justify-content-center">
                <div class="col-xl-4 col-lg-5 col-md-7 mx-auto">
                    <div class="card card-profile shadow  z-index-0">
                        <div class="card-body">
                            <form role="form">
                                <div class="mb-3">
                                    <input type="text" class="form-control" id="name" placeholder="Enter display name"
                                        aria-label="display name">
                                </div>
                                <div class="text-center">
                                    <button onclick="joinSession()" type="button"
                                        class="btn btn-primary  my-4 mb-2">Submit</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>


    <div id="mainContent" class="main-content position-relative max-height-vh-100 h-100">
        <nav
            class="navbar navbar-main navbar-expand-lg bg-transparent shadow-none position-absolute px-4 w-100 z-index-2 mt-n11">
            <div class="container-fluid py-1">
                <div class="collapse navbar-collapse me-md-0 me-sm-4 mt-sm-0 mt-2" id="navbar">
                    <div class="ms-md-auto pe-md-3 d-flex align-items-center">
                        <div id="titleChange" class="input-group">
                            <span class="input-group-text text-body"><i class="fas fa-edit"
                                    aria-hidden="true"></i></span>
                            <input type="text" id="voteTitle" class="form-control" placeholder="Change title...">
                        </div>
                    </div>
                    <ul class="navbar-nav justify-content-end">
                        <li class="nav-item d-flex align-items-center">
                            <a href="javascript:leaveSession();" class="nav-link text-white font-weight-bold px-0">
                                <i class="fa fa-user me-sm-1"></i>
                                <span class="d-sm-inline">Leave</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="card shadow-lg mx-4 card-profile-bottom">
            <div class="card-body p-3">
                <div class="row gx-4">
                    <div class="col-auto">
                        <div class="avatar avatar-xl position-relative">
                            <img src="https://chibujax.com/logo_game_high_res.png" alt="profile_image"
                                class="w-100 border-radius-lg shadow-sm">
                        </div>
                    </div>
                    <div class="col-auto my-auto">
                        <div class="h-100">
                            <h5 id="sessionName" class="mb-1">
                                Session: 
                            </h5>
                            <p id="voteTitleDisplay" class="mb-0 font-weight-bold text-sm">
                                Title: 
                            </p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 my-sm-auto ms-sm-auto me-sm-0 mx-auto mt-3">
                        <div class="nav-wrapper position-relative end-0">
                            <button id="end" onclick="endSession()" class="btn btn-danger btn-sm ms-auto"
                                style="float: right;">End Session</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid py-4">
            <div class="row">
                <div class="col-md-8">
                    <div class="card" style="min-height: 30vh;">
                        <div class="card-body">
                            <div id="votes" style="display: flex;flex-wrap: wrap;gap: 10px;"></div>
                            <div class="row" id="users"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card card-profile">
                        <div id="scoreAdmin" style="display: none!important;" class="card-header text-center border-0">
                            <div class="d-flex justify-content-between">
                                <div id="revealBtn">
                                    <a href="javascript:reveal();" class="btn btn-sm btn-info mb-0">Reveal</a>
                                </div>

                                <a href="javascript:restart();" id="restart"
                                    class="btn btn-sm btn-dark float-right mb-0">Restart</a>
                            </div>
                        </div>
                        <div class="card-body pt-0">
                            <div class="text-center mt-4">
                                <div id="scoreBoard2" style="display: none" class="bg-gray-100">
                                    <div class="row">
                                        <div class="col-lg-4 col-12" style="display: flex;flex-direction: column;">
                                            <div class="card card-frame ms-sm-3 mt-sm-3 bg-primary text-white" style="flex: 1;">
                                                  <div class="card-body">
                                                        <div class="font-weight-bolder">
                                                            Highest Vote:
                                                        </div>
                                                        <div id="highestVote" class="font-weight-bold">
                                                            0
                                                        </div>  
                                                        <div id="highestVoter" class="text-xxs">
                                                        </div> 
                                                  </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-12" style="display: flex;flex-direction: column;">
                                            <div class="card card-frame mt-sm-3 bg-info text-white" style="flex: 1;">
                                                  <div class="card-body">
                                                        <div class="font-weight-bolder">
                                                            Lowest Vote:
                                                        </div>
                                                        <div id="lowestVote" class="font-weight-bold">
                                                            0
                                                        </div>  
                                                        <div id="lowestVoteLabel" class="text-xxs">
                                                        </div>  
                                                  </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-12" style="display: flex;flex-direction: column;">
                                            <div class="card card-frame mt-sm-3 me-sm-3 bg-success text-white" style="flex: 1;">
                                                  <div class="card-body">
                                                        <div class="font-weight-bolder">
                                                            Other Votes:
                                                        </div> 
                                                        <div id="otherVotes" class="text-xxs">
                                                        </div> 
                                                  </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6 col-12">
                                            <div class="card card-frame ms-sm-3 my-sm-3 bg-dark text-white">
                                                  <div class="card-body">
                                                        <div class="font-weight-bolder">
                                                            Average
                                                        </div>
                                                        <div id="averageVotes" class="font-weight-bold">
                                                            0
                                                        </div> 
                                                  </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-12">
                                            <div class="card card-frame my-sm-3 me-sm-3 bg-warning text-white">
                                                  <div class="card-body">
                                                        <div class="font-weight-bolder">
                                                            Total
                                                        </div>
                                                        <div id="totalVotes" class="font-weight-bold">
                                                            0
                                                        </div> 
                                                  </div>
                                            </div>
                                        </div>                                      
                                    </div>
                                </div>
                            </div>
                      </div>
                  </div>
              </div>

            <footer class="footer pt-3" style="position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            opacity: 0.3;">
                <div class="container-fluid">
                    <div class="row align-items-center justify-content-lg-between">
                        <div class="col-lg-6 mb-lg-0 mb-4">
                            <div class="copyright text-center text-sm text-muted text-lg-start">
                                ©
                                <script>
                                    document.write(new Date().getFullYear())
                                </script>,
                                made with <i class="fa fa-heart"></i> by
                                Jax.
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <div id="adminTransferModal" class="modal fade" style="display: none; background: rgba(0,0,0,0.5); position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1050; opacity: 1;">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Transfer Admin Rights</h5>
                </div>
                <div class="modal-body">
                    <p>Please select a new admin before leaving:</p>
                    <div id="userList" class="my-3" style="display: flex;flex-wrap: wrap;gap: 10px;"></div>
                </div>
                <div class="modal-footer">
                    <button onclick="cancelAdminTransfer()" class="btn bg-gradient-secondary">Cancel</button>
                </div>
            </div>
        </div>
    </div>   
    <script src="common.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="session.js"></script>
</body>

</html>